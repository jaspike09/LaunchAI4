async function init() {
    try {
        const { data: { session } } = await _supabase.auth.getSession();
        
        // If no session, stop everything and go to login
        if (!session) { 
            window.location.href = 'auth.html'; 
            return; 
        }

        const userEmail = session.user.email;
        const userName = userEmail.split('@')[0];

        // SAFE UI UPDATE: Check if elements exist before setting text
        const nameEl = document.getElementById('userNameDisplay');
        if (nameEl) nameEl.innerText = userName;

        const { data: profile } = await _supabase.from('profiles')
            .select('*')
            .eq('id', session.user.id)
            .maybeSingle();

        const ideaEl = document.getElementById('ideaDisplay');
        if (ideaEl && profile) {
            ideaEl.innerText = `"${profile.business_idea || 'Stealth Venture'}"`;
        }

    } catch (err) {
        console.error("Dashboard Init Error:", err.message);
    }
}
